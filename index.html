<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>COPYPROMPT APP</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#2b6cb0">
<style>
html, body { margin:0; padding:0; width:100%; box-sizing:border-box; overflow-x:hidden; }
.hero{ position:relative; height:100vh; width:100%; display:flex; justify-content:center; align-items:center; text-align:center; }
.hero img{ width:100%; height:100%; object-fit:cover; object-position:center 30%; position:absolute; top:0; left:0; }
.overlay{ position:absolute; bottom:70px; left:50%; transform:translateX(-50%); text-align:center; color:white; }
.overlay h1{ font-size:24px; font-weight:bold; margin-bottom:20px; text-shadow:0 2px 5px rgba(0,0,0,0.7); }
button { padding:12px 28px; font-size:16px; font-weight:bold; border-radius:25px; cursor:pointer; border:none; display:none; }
#installBtn { background: linear-gradient(to left, orange -14%, pink 68%); color:white; border:1px solid white; }
#installBtn:hover{ background:#f1c40f; color:black; }
#openBtn { background: linear-gradient(to right, #ff6a00, #ee0979); color:white; box-shadow:0 4px 10px rgba(0,0,0,0.2); }
#openBtn:hover { transform:scale(1.05); }
</style>
</head>
<body>
<div class="hero">
  <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi5ajVuCqhiOMkS1Y24LOJbFvDI5oKVIWSIszuv2ln9bbMa22ok4Hyx5tej5e_gB-1e8ED18g1lJfGEYzVh8k7GawHZsFsOKg-7MS_hTdFk1oA_bkSaAq-aAZXsNfTipxf4Y686NLIIgxn_acoGHaiqXZvvyZbR2kFkgQsnJdaRl_51TuP2dhVQPx9V0ZE/s1600/Banner-copypromt_20250921_110520_0000.jpg">
  <div class="overlay">
    <h1>COPY PROMPT IDEAS INSTANTLY!</h1>
    <button id="installBtn">INSTALL APP</button>
    <button id="openBtn">OPEN APP</button>
  </div>
</div>

<script>
const installBtn = document.getElementById("installBtn");
const openBtn = document.getElementById("openBtn");
let deferredPrompt;

// ✅ Check if running inside PWA (standalone)
function isInstalled() {
  return window.navigator.standalone || window.matchMedia("(display-mode: standalone)").matches;
}

// ✅ Show/Hide buttons correctly
function handleButtons() {
  if (isInstalled()) {
    // App ke andar → hide openBtn, installBtn
    openBtn.style.display = "none";
    installBtn.style.display = "none";
  } else {
    // Browser me → show openBtn agar already installed, 
    // warna install button ke liye wait karo
    if (deferredPrompt) {
      installBtn.style.display = "inline-block";
      openBtn.style.display = "none";
    } else {
      installBtn.style.display = "none";
      openBtn.style.display = "inline-block";
    }
  }
}

// ✅ Run on load
window.addEventListener("load", handleButtons);

// ✅ Before install prompt
window.addEventListener("beforeinstallprompt", (e) => {
  e.preventDefault();
  deferredPrompt = e;
  handleButtons();
});

// ✅ Install button click
installBtn.addEventListener("click", async () => {
  if (!deferredPrompt) return;
  deferredPrompt.prompt();
  const { outcome } = await deferredPrompt.userChoice;
  if (outcome === "accepted") {
    console.log("PWA installed");
    installBtn.style.display = "none";
    openBtn.style.display = "inline-block";
  }
  deferredPrompt = null;
});

// ✅ App installed event
window.addEventListener("appinstalled", () => {
  console.log("App installed successfully");
  installBtn.style.display = "none";
  openBtn.style.display = "inline-block";
});

// ✅ Open button click → open PWA
openBtn.addEventListener("click", () => {
  window.location.href = "https://todaylite.github.io/copyprompt/index.html";
});
</script>
</body>
</html>
