<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>COPYPROMPT APP</title>

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2b6cb0">

  <!-- Icons -->
  <link rel="icon" href="icons/icon-192.png" type="image/png">

  <!-- Styles -->
  <link rel="stylesheet" href="style.css">
  <style>
    /* Global reset */
    html, body { margin:0; padding:0; overflow-x:hidden; width:100%; box-sizing:border-box; }
    .container { width:100%; max-width:100%; overflow-x:hidden; }

    /* Hero Section */
    .hero{
      position:relative;
      height:100vh;
      width:100%;
      display:flex;
      justify-content:center;
      align-items:center;
      text-align:center;
    }
    .hero img{
      object-fit:cover;
      object-position:center 30%;
      position:absolute;
      top:0; left:0;
      width:100%; height:100%;
    }
    .overlay{
      position:absolute;
      bottom:70px;
      left:50%;
      transform:translateX(-50%);
      color:white;
      text-align:center;
    }
    .overlay h1{
      font-size:24px;
      font-weight:bold;
      margin-bottom:20px;
      text-shadow:0 2px 5px rgba(0,0,0,0.7);
    }

    /* Buttons */
    #installBtn, #openBtn{
      padding:12px 28px;
      font-size:16px;
      font-weight:bold;
      border:1px solid white;
      border-radius:25px;
      background: linear-gradient(to left, orange -14%,pink 68%);
      color:white;
      cursor:pointer;
      transition:0.3s;
      display:none;
    }
    #installBtn:hover, #openBtn:hover{
      background:#f1c40f;
      color:black;
    }
  </style>
</head>
<body>
  <div class="hero">
    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi5ajVuCqhiOMkS1Y24LOJbFvDI5oKVIWSIszuv2ln9bbMa22ok4Hyx5tej5e_gB-1e8ED18g1lJfGEYzVh8k7GawHZsFsOKg-7MS_hTdFk1oA_bkSaAq-aAZXsNfTipxf4Y686NLIIgxn_acoGHaiqXZvvyZbR2kFkgQsnJdaRl_51TuP2dhVQPx9V0ZE/s1600/Banner-copypromt_20250921_110520_0000.jpg">
    <div class="overlay">
      <h1>COPY PROMPT IDEAS INSTANTLY!</h1>
      <button id="installBtn">INSTALL APP</button>
      <button id="openBtn">OPEN APP</button>
    </div>
  </div>

  <script>
    let deferredPrompt;
    const installBtn = document.getElementById("installBtn");
    const openBtn = document.getElementById("openBtn");

    // ✅ Check if PWA installed
    function isInstalled() {
      if (window.navigator.standalone) return true; // iOS
      if (window.matchMedia("(display-mode: standalone)").matches) return true; // Chrome/Android
      return false;
    }

    // ✅ Redirect if installed
    function redirectIfInstalled() {
      if (isInstalled()) {
        window.location.replace("https://google.com"); // redirect URL
      }
    }

    // ✅ Always check on load & back-forward
    window.addEventListener("load", redirectIfInstalled);
    window.addEventListener("pageshow", (event) => {
      if (event.persisted || performance.getEntriesByType("navigation")[0].type === "back_forward") {
        redirectIfInstalled();
      }
    });

    // ✅ Before install prompt
    window.addEventListener("beforeinstallprompt", (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installBtn.style.display = "inline-block";
      openBtn.style.display = "none";
    });

    // ✅ Install button click
    installBtn.addEventListener("click", async () => {
      if (!deferredPrompt) return;
      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      if (outcome === "accepted") {
        console.log("PWA install accepted");
        installBtn.style.display = "none";
        openBtn.style.display = "inline-block";
        window.location.replace("https://google.com"); // install ke turant baad redirect
      } else {
        console.log("PWA install dismissed");
      }
      deferredPrompt = null;
    });

    // ✅ App installed event
    window.addEventListener("appinstalled", () => {
      console.log("App installed successfully");
      installBtn.style.display = "none";
      openBtn.style.display = "inline-block";
      window.location.replace("https://google.com");
    });

    // ✅ Open in App button
    openBtn.addEventListener("click", () => {
      window.location.href = "https://todaylite.github.io/copyprompt/index.html";
    });
  </script>
</body>
</html>
