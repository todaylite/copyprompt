<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>COPYPROMPT APP</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#2b6cb0">

<!-- Firebase SDK v9 (Modular) -->
<script type="module">
  // Import Firebase modules
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-app.js";
  import { getMessaging, getToken } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-messaging.js";

  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyAwMir8E-5e4fe-hdwzIHxfLzdnKa9LK20",
    authDomain: "copyprompt-app.firebaseapp.com",
    projectId: "copyprompt-app",
    storageBucket: "copyprompt-app.firebasestorage.app",
    messagingSenderId: "896337421281",
    appId: "1:896337421281:web:35ee45a7b0a76f437d68a0"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);

  // Initialize Messaging
  const messaging = getMessaging(app);

  // Notify button listener
  window.addEventListener('DOMContentLoaded', () => {
    const notifyBtn = document.getElementById('notifyBtn');

    notifyBtn.addEventListener('click', async () => {
      try {
        const permission = await Notification.requestPermission();
        if(permission === 'granted'){
          console.log("Notification permission granted!");
          
          // Get FCM token
          const token = await getToken(messaging, { 
            vapidKey: "BIet79wDomw6_EVD6ScqSf8ST8zmVdpP146NxOU9JCIQtbCoA6r2WGkM_DMITlqX1XhFy1a3angnV7Vfkl6Z3F0" 
          });
          
          if(token){
            console.log("FCM Token:", token);
            alert("FCM Token generated! Check console.");
          } else {
            console.log("No registration token available. Request permission again.");
          }
        } else {
          console.log("Notification permission denied.");
        }
      } catch (err) {
        console.error("Error getting notification permission or token:", err);
      }
    });
  });

  // Register service worker
  if('serviceWorker' in navigator){
    navigator.serviceWorker.register('firebase-messaging-sw.js')
      .then(registration => console.log("Service Worker registered:", registration))
      .catch(err => console.error("Service Worker registration failed:", err));
  }
</script>

<style>
  #notifyBtn {
    display:block;
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: linear-gradient(45deg, #25D366, #128C7E);
    color: white;
    border: none;
    border-radius: 50px;
    padding: 15px 25px;
    font-size: 16px;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    transition: transform 0.2s;
    z-index: 9999;
  }
  #notifyBtn:hover { transform: scale(1.05); }
</style>
</head>
<body>

<div class="hero">
  <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi5ajVuCqhiOMkS1Y24LOJbFvDI5oKVIWSIszuv2ln9bbMa22ok4Hyx5tej5e_gB-1e8ED18g1lJfGEYzVh8k7GawHZsFsOKg-7MS_hTdFk1oA_bkSaAq-aAZXsNfTipxf4Y686NLIIgxn_acoGHaiqXZvvyZbR2kFkgQsnJdaRl_51TuP2dhVQPx9V0ZE/s1600/Banner-copypromt_20250921_110520_0000.jpg" style="width:100%; height:auto;">
  <div class="overlay">
    <h1>COPY PROMPT IDEAS INSTANTLY!</h1>
    <button id="installBtn">INSTALL APP</button>
    <button id="openBtn">OPEN APP</button>
  </div>
  <div id="notifyBtn">âœ¨Enable Notifications</div>
</div>

</body>
</html>
