<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>COPYPROMPT App</title>

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2b6cb0">

  <!-- Icons -->
  <link rel="icon" href="icons/icon-192.png" type="image/png">

  <style>
    /* Global reset */
    html, body {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      width: 100%;
      box-sizing: border-box;
    }
    .hero{
      position:relative;
      height: 100vh;
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    .hero img{
      object-fit: cover;
      object-position: center 30%;
      position: absolute;
      top: 0;
      left: 0;
      width:100%;
      height:100%;
    }
    .overlay{
      position: absolute;
      bottom: 70px;
      left: 50%;
      transform: translateX(-50%);
      color: white;
      text-align: center;
    }
    .overlay h1{
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 20px;
      text-shadow: 0 2px 5px rgba(0,0,0,0.7);
    }
    .overlay button{
      padding: 12px 28px;
      font-size: 16px;
      font-weight: bold;
      border:1px solid white;
      border-radius: 25px;
      background: linear-gradient(to left, orange -14%,pink 68%);
      color:white;
      cursor: pointer;
      transition: 0.3s;
    }
    .overlay button:hover {
      background: #f1c40f;
      color: black;
    }
    #installBtn, #openAppBtn {
      display: none; /* Initially hidden */
      padding: 12px 28px;
      font-size: 16px;
      font-weight: bold;
      border:1px solid white;
      border-radius: 25px;
      background: linear-gradient(to left, orange -14%,pink 68%);
      color:white;
      cursor: pointer;
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
    }
    #installBtn:hover, #openAppBtn:hover {
      background: #f1c40f;
      color: black;
    }
  </style>
</head>
<body>

<div class="hero">
  <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi5ajVuCqhiOMkS1Y24LOJbFvDI5oKVIWSIszuv2ln9bbMa22ok4Hyx5tej5e_gB-1e8ED18g1lJfGEYzVh8k7GawHZsFsOKg-7MS_hTdFk1oA_bkSaAq-aAZXsNfTipxf4Y686NLIIgxn_acoGHaiqXZvvyZbR2kFkgQsnJdaRl_51TuP2dhVQPx9V0ZE/s1600/Banner-copypromt_20250921_110520_0000.jpg" alt="Banner">
  <div class="overlay">
    <h1>COPY PROMPT IDEAS INSTANTLY!</h1>
    <button id="installBtn">INSTALL APP</button>
  </div>
</div>

<button id="openAppBtn">OPEN APP</button>

<script>
let deferredPrompt;
const installBtn = document.getElementById('installBtn');
const openAppBtn = document.getElementById('openAppBtn');

// Function to detect if PWA is installed
function isPWAInstalled() {
  return window.navigator.standalone || window.matchMedia('(display-mode: standalone)').matches;
}

// Show buttons based on install status
function updateButtons() {
  if (isPWAInstalled()) {
    // PWA already installed → show Open App button, hide Install
    installBtn.style.display = 'none';
    openAppBtn.style.display = 'block';
  } else {
    // Not installed → show Install button
    installBtn.style.display = 'block';
    openAppBtn.style.display = 'none';
  }
}

// Listen for beforeinstallprompt
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  updateButtons(); // Show install button
});

// Install button click
installBtn.addEventListener('click', async () => {
  if (!deferredPrompt) return;
  deferredPrompt.prompt();
  const { outcome } = await deferredPrompt.userChoice;
  if (outcome === 'accepted') {
    console.log('User accepted install');
  } else {
    console.log('User dismissed install');
  }
  deferredPrompt = null;
  updateButtons();
});

// Open App button click
openAppBtn.addEventListener('click', () => {
  alert('App already installed!'); 
  // Yahan redirect kar sakte ho agar chaho
  // window.location.href = "https://eloanwarehouse.blogspot.com/p/pinterest-style-gallery.html";
});

// Redirect automatically if installed
if (isPWAInstalled()) {
  // Optionally redirect if already PWA
  // window.location.href = "https://eloanwarehouse.blogspot.com/p/pinterest-style-gallery.html";
}

// Update buttons on load
window.addEventListener('load', updateButtons);

// Update buttons if app installed
window.addEventListener('appinstalled', () => {
  console.log('PWA installed!');
  updateButtons();
});
</script>

</body>
</html>
